"use strict";var bpc={};function getParameterByName(e){var t=RegExp("[?&]".concat(e,"=([^&]*)")).exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))}function getMajorPixiVersion(e){var t=5;return"v"===e.substr(0,1)&&(t=parseInt(e.substr(1,1),10)),t}jQuery(document).ready(function(e){window.onpopstate=function(t){bpc.pixiVersionString=getParameterByName("v")||"dev",bpc.generateIFrameContent(),e(".select-group .select li.selected").removeClass("selected");var i=e('.select-group .select li[data-val="'.concat(bpc.pixiVersionString,'"]'));i.addClass("selected"),e(".select-group .select .current").text(i.text()),e(".main-content").animate({scrollTop:0},200)},bpc.allowedVersions=[5],bpc.pixiVersionString=getParameterByName("v")||"dev",bpc.majorPixiVersion=getMajorPixiVersion(bpc.pixiVersionString),bpc.exampleUrl="",bpc.exampleFilename="",bpc.exampleTitle="",bpc.exampleSourceCode="",bpc.exampleRequiredPlugins=[],bpc.exampleValidVersions=[],bpc.editorOptions={mode:"javascript",lineNumbers:!0,styleActiveLine:!0,matchBrackets:!0,viewportMargin:1/0,lineWrapping:!0},bpc.clickType="click",bpc.animTime=.15,bpc.resize=function(){},bpc.scriptsToLoad=["https://cdnjs.cloudflare.com/ajax/libs/gsap/2.0.2/TweenMax.min.js"],bpc.scriptsLoaded=0,bpc.loadScriptsAsync=function(){for(var t=0;t<bpc.scriptsToLoad.length;t++)e.ajax({url:bpc.scriptsToLoad[t],dataType:"script",cache:!0,async:!0,success:bpc.fileLoaded});0===bpc.scriptsToLoad.length&&bpc.loadComplete()},bpc.fileLoaded=function(){bpc.scriptsLoaded++,bpc.scriptsLoaded===bpc.scriptsToLoad.length&&bpc.loadComplete()},bpc.loadComplete=function(){e.getJSON("examples/manifest.json",function(t){for(var i=Object.keys(t),n=0;n<i.length;n++){for(var a='<span class="section" data-section="'.concat(i[n],'">').concat(i[n],'</span><ul data-section="').concat(i[n],'">'),c=t[i[n]],o=0;o<c.length;o++){var s=void 0!==c[o].plugins?c[o].plugins.join(","):"",r=void 0!==c[o].validVersions?c[o].validVersions.join(","):"";a+='<li data-src="'.concat(c[o].entry,'" data-plugins="').concat(s,'" data-validVersions="').concat(r,'">').concat(c[o].title,"</li>")}a+="</ul>",e(".main-menu").append(a)}bpc.initNav()}),e.getJSON("https://api.github.com/repos/pixijs/pixi.js/git/refs/tags",function(t){var i=[];bpc.allowedVersions.forEach(function(e){var n=t.filter(function(t){return 0===t.ref.indexOf("refs/tags/v".concat(e))});n.length>5&&(n=n.slice(-5)),i=i.concat(n)}),i=i.map(function(e){return e.ref.replace("refs/tags/","")});for(var n=0;n<i.length;n++)e(".select-group .select ul").append('<li data-val="'.concat(i[n],'">').concat(i[n],"</li>"));e.getJSON("https://api.github.com/repos/pixijs/pixi.js/git/refs/heads",function(t){t=t.filter(function(e){return 0===e.ref.indexOf("refs/heads/next")}).map(function(e){return e.ref.replace("refs/heads/","")});for(var i=0;i<t.length;i++)e(".select-group .select ul").append('<li data-val="'.concat(t[i],'">').concat(t[i],"</li>"));var n=e('.select-group .select li[data-val="'.concat(bpc.pixiVersionString,'"]'));n.addClass("selected"),e(".select-group .select .current").text(n.text())})});var t=new Stats;console.log(t,t.domElement),t.showPanel(0),t.domElement.style.position="absolute",t.domElement.style.right="0px",t.domElement.style.zIndex=999,document.body.appendChild(t.domElement),requestAnimationFrame(function e(){t.begin(),t.end(),requestAnimationFrame(e)})},bpc.initNav=function(){if(e(".main-menu .section").on(bpc.clickType,function(){e(this).next("ul").slideToggle(250),e(this).toggleClass("open")}),e(".main-menu li").on(bpc.clickType,function(){if(!e(this).hasClass("selected")){e(".main-menu li.selected").removeClass("selected"),e(this).addClass("selected"),bpc.closeMobileNav();var t="/".concat(e(this).parent().attr("data-section"),"/").concat(e(this).attr("data-src"));bpc.exampleTitle=e(this).text(),window.location.hash=t,document.title="".concat(bpc.exampleTitle," - PixiJS Examples"),ga("set",{page:t,title:bpc.exampleTitle}),ga("send","pageview"),bpc.exampleUrl="examples/js/".concat(e(this).parent().attr("data-section"),"/").concat(e(this).attr("data-src")),bpc.exampleFilename=e(this).attr("data-src");var i=e(this).attr("data-plugins");bpc.exampleRequiredPlugins=""===i?[]:i.split(",");var n=e(this).attr("data-validVersions");bpc.exampleValidVersions=""===n?[4,5]:n.split(",").map(function(e){return parseInt(e,10)}),e.ajax({url:"examples/js/".concat(e(this).parent().attr("data-section"),"/").concat(e(this).attr("data-src")),dataType:"text",success:function(e){bpc.exampleSourceCode=e,bpc.generateIFrameContent()}})}}),bpc.generateIFrameContent=function(){for(var t=document.querySelectorAll("iframe"),i=0;i<t.length;i++)t[i].parentNode.removeChild(t[i]);e("#example").html('<iframe id="preview" src="blank.html"></iframe>'),e(".CodeMirror").remove(),e(".main-content #code").html(bpc.exampleSourceCode);var n="";n="local"===bpc.pixiVersionString?"dist/pixi.js":3===bpc.majorPixiVersion?"https://cdn.rawgit.com/GoodBoyDigital/pixi.js/".concat(bpc.pixiVersionString,"/bin/pixi.js"):"https://d157l7jdn8e5sf.cloudfront.net/".concat(bpc.pixiVersionString,"/pixi-legacy.js");var a="<!DOCTYPE html><html><head><style>";a+="body,html{margin:0px;height:100%;overflow:hidden;}canvas{width:100%;height:100%;}",a+="</style></head><body>",a+='<script src="https://code.jquery.com/jquery-3.3.1.min.js"><\/script>',a+='<script src="'.concat(n,'"><\/script>'),bpc.majorPixiVersion<5&&(a+='<script src="pixi-plugins/pixi-legacy.js"><\/script>');for(var c=0;c<bpc.exampleRequiredPlugins.length;c++)a+='<script src="pixi-plugins/'.concat(bpc.exampleRequiredPlugins[c],'.js"><\/script>');bpc.editor=CodeMirror.fromTextArea(document.getElementById("code"),bpc.editorOptions),bpc.exampleRequiredPlugins.length?e("#code-header").text("Example Code (plugins used: ".concat(bpc.exampleRequiredPlugins.toString(),")")):e("#code-header").text("Example Code"),!bpc.exampleValidVersions.length||bpc.exampleValidVersions.indexOf(bpc.majorPixiVersion)>-1?(e("#example-title").html(bpc.exampleTitle),a+="<script>window.onload = function(){".concat(bpc.exampleSourceCode,"}<\/script></body></html>"),e(".example-frame").show()):(e("#example-title").html("".concat(bpc.exampleTitle,"<br><br><br><br><br><br><br>")+"The selected version of PixiJS does not work with this example.<br><br>"+"Selected version: v".concat(bpc.majorPixiVersion,"<br><br>")+"Required version: v".concat(bpc.exampleValidVersions.toString(),"<br><br><br><br><br>")),e(".example-frame").hide());var o=document.getElementById("preview"),s=o.contentDocument||o.contentWindow.document;s.open(),s.write(a),s.close()},bpc.openMobileNav=function(){TweenMax.to("#line1",bpc.animTime,{y:0,ease:Linear.easeNone}),TweenMax.to("#line2",0,{alpha:0,ease:Linear.easeNone,delay:bpc.animTime}),TweenMax.to("#line3",bpc.animTime,{y:0,ease:Linear.easeNone}),TweenMax.to("#line1",bpc.animTime,{rotation:45,ease:Quart.easeOut,delay:bpc.animTime}),TweenMax.to("#line3",bpc.animTime,{rotation:-45,ease:Quart.easeOut,delay:bpc.animTime}),e(".main-nav").addClass("mobile-open")},bpc.closeMobileNav=function(){TweenMax.to("#line1",bpc.animTime,{rotation:0,ease:Linear.easeNone,delay:0}),TweenMax.to("#line3",bpc.animTime,{rotation:0,ease:Linear.easeNone,delay:0}),TweenMax.to("#line2",0,{alpha:1,ease:Quart.easeOut,delay:bpc.animTime}),TweenMax.to("#line1",bpc.animTime,{y:-8,ease:Quart.easeOut,delay:bpc.animTime}),TweenMax.to("#line3",bpc.animTime,{y:8,ease:Quart.easeOut,delay:bpc.animTime}),e(".main-nav").removeClass("mobile-open")},bpc.updateMenu=function(){e(".main-nav .main-menu ul li").each(function(){var t=e(this).attr("data-validVersions");-1===(""===t?[4,5]:t.split(",").map(function(e){return parseInt(e,10)})).indexOf(bpc.majorPixiVersion)?e(this).addClass("invalid"):e(this).removeClass("invalid")})},bpc.updateMenu(),e(".main-header .hamburger").on(bpc.clickType,function(t){return t.preventDefault(),e(".main-nav").hasClass("mobile-open")?bpc.closeMobileNav():bpc.openMobileNav(),!1}),""!==window.location.hash){var t=window.location.hash.replace("#/","").split("/");t.length>1&&e('.main-menu .section[data-section="'.concat(t[0],'"]')).length>0&&(e('.main-menu .section[data-section="'.concat(t[0],'"]')).trigger(bpc.clickType),e('.main-menu .section[data-section="'.concat(t[0],'"]')).next().find('li[data-src="'.concat(t[1],'"]')).length>0&&e('.main-menu .section[data-section="'.concat(t[0],'"]')).next().find('li[data-src="'.concat(t[1],'"]')).trigger(bpc.clickType))}else e(".main-menu .section").eq(0).trigger(bpc.clickType),e(".main-menu li").eq(0).trigger(bpc.clickType);e(".select-group").on(bpc.clickType,function(){e(this).find(".select").hasClass("open")?(e(this).find(".select").removeClass("open"),e(this).find("ul").slideUp(150)):(e(this).find(".select").addClass("open"),e(this).find("ul").slideDown(150))}),e(".select-group .select").on(bpc.clickType,"li",function(){e(this).hasClass("selected")||(e(".select-group .select li.selected").removeClass("selected"),e(this).addClass("selected"),e(".select-group .select .current").text(e(this).text()),bpc.pixiVersionString=e(this).attr("data-val"),bpc.majorPixiVersion=getMajorPixiVersion(bpc.pixiVersionString),window.history.pushState(bpc.pixiVersionString,null,"?v=".concat(bpc.pixiVersionString).concat(window.location.hash)),bpc.updateMenu(),bpc.generateIFrameContent(),e(".main-content").animate({scrollTop:0},200))}),e(".footer .download").on(bpc.clickType,function(){bpc.SaveToDisk(bpc.exampleUrl,bpc.exampleFilename)});var i=0,n=[];e.getJSON("examples/manifest.json",function(e){var t=Object.keys(e);console.log(t);for(var a=0,c=0;c<t.length;c++)for(var o=e[t[c]],s=0;s<o.length;s++)o[s].entry=t[c]+"/"+o[s].entry,n.push(o[s]),-1!==window.location.href.indexOf(o[s].entry)&&(i=a),a++}),e(".reload").on(bpc.clickType,function(){i++,window.location.href="/#/"+n[i].entry,bpc.exampleTitle=n[i].title,e.ajax({url:"examples/js/".concat(n[i].entry),dataType:"text",success:function(e){bpc.exampleSourceCode=e,bpc.generateIFrameContent()}})})},bpc.SaveToDisk=function(e,t){if(window.ActiveXObject){if(window.ActiveXObject&&document.execCommand){var i=window.open(e,"_blank");i.document.close(),i.document.execCommand("SaveAs",!0,t||e),i.close()}}else{var n=document.createElement("a");n.href=e,n.target="_blank",n.download=t||"unknown";var a=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});n.dispatchEvent(a),(window.URL||window.webkitURL).revokeObjectURL(n.href)}},bpc.init=function(){e(window).resize(bpc.resize),bpc.loadScriptsAsync()},bpc.init()});